var e=Object.defineProperty,l=Object.prototype.hasOwnProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.propertyIsEnumerable,r=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,o=(e,o)=>{for(var n in o||(o={}))l.call(o,n)&&r(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&r(e,n,o[n]);return e};import{s as n,x as u,d as s,y as i,g as d,p,a as c,r as m,o as f,c as h,b as g,F as v,e as b,j as y,w as F,h as w,f as x,z as C}from"./index.cf1eb326.js";import"./vendor.a8c43f00.js";const V=[{label:"编号",minWidth:"60",sortable:!0,props:[{prop:"id"}]},{label:"书名",props:[{type:"href",prop:"href",data:{prop:"name",style:{fontWeight:"bold"}}},{text:"热度：",type:"iconfont",prop:"iconfont",data:{class:["viteIcon"],style:{color:"red"}}}]},{label:"封面",width:"120",props:[{type:"image",prop:"image",data:{preview:!0,style:{width:"40px",height:"60px",borderRadius:"5px"}}}]},{label:"类型",width:"100",props:[{prop:"types",filter:[{key:0,value:"玄幻"},{key:1,value:"都市"},{key:2,value:"真实"}]}]},{label:"内容",overflowTooltip:!0,props:[{prop:"text"}]},{label:"评分",width:"150",props:[{prop:"rate",type:"rate",data:{colors:[u.getters.getThemeColor,u.getters.getThemeColor,u.getters.getThemeColor],max:5,allowHalf:!0}}]},{label:"推荐",width:"100",props:[{prop:"recommend",type:"switch",data:{activeColor:u.getters.getThemeColor}}]},{label:"价格",width:"120",props:[{text:"原价：",prop:"oldPrice"},{prop:"price",type:"input",data:{placeholder:"请输入现价"}}]},{label:"更新时间（远程搜索）",sortable:"custom",props:[{prop:"date"}]},{label:"操作",minWidth:"120px",props:[{type:"btn",data:[{tip:"编辑",type:"info",icon:"el-icon-edit-outline",emit:"update"},{tip:"删除",type:"danger",icon:"el-icon-delete",emit:"remove"}]}]}];var _=s({props:{dialog:{type:Boolean,default:!1},currentFrom:{type:Object,default:()=>{}},selectMenuList:{type:Array,default:()=>[]}},emits:["update:currentFrom","update:dialog","refresh"],setup(e,l){let a=i("messageBox"),t=i("$message"),r=d({});return{close:function(){l.emit("update:dialog",!1),l.emit("update:currentFrom",{})},uploadForm:r,resetForm:function(){r.resetFields(),l.emit("update:currentFrom",{})},onSubmit:function(){r.value.validate((r=>{if(!r)return t({message:"验证失败",type:"error",duration:1e3}),!1;a.confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.currentFrom.id?t({message:"修改成功",type:"success",duration:1e3}):setTimeout((()=>{t({message:"提交成功",type:"success",duration:1e3})}),200),setTimeout((()=>{l.emit("refresh",e.currentFrom),l.emit("update:dialog",!1)}),200)}))}))},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入前端名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入前端图标",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}]}}}});const S=F();p("data-v-5e88e1b2");const O={class:"a"},D={class:"grid grid-c-2"},U=w("提交"),k=w("重置");c();const T=S(((e,l,a,t,r,o)=>{const n=m("el-input"),u=m("el-form-item"),s=m("upload-file"),i=m("el-option"),d=m("el-select"),p=m("el-rate"),c=m("el-switch"),F=m("el-button"),w=m("el-form"),x=m("el-drawer");return f(),h(x,{title:e.currentFrom.id?"修改":"添加","model-value":e.dialog,direction:"rtl",ref:"drawer",onClose:e.close},{default:S((()=>[g(w,{model:e.currentFrom,rules:e.rules,ref:"uploadForm","label-position":"top",style:{padding:"0 20px"},class:"Dform"},{default:S((()=>[g(u,{label:"书名",prop:"name"},{default:S((()=>[g(n,{modelValue:e.currentFrom.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.currentFrom.name=l)},null,8,["modelValue"])])),_:1}),g(u,{label:"封面",prop:"image"},{default:S((()=>[g(s,{value:e.currentFrom.image,"onUpdate:value":l[2]||(l[2]=l=>e.currentFrom.image=l),disabled:"",tipLabel:"当前仅为示例，请改成可上传地址"},null,8,["value"])])),_:1}),g(u,{label:"类型",prop:"types"},{default:S((()=>[g(d,{modelValue:e.currentFrom.types,"onUpdate:modelValue":l[3]||(l[3]=l=>e.currentFrom.types=l),placeholder:"请选择",style:{width:"100%"}},{default:S((()=>[(f(!0),h(v,null,b(e.selectMenuList,(e=>(f(),h(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),g(u,{label:"内容",prop:"text"},{default:S((()=>[g(n,{type:"textarea",modelValue:e.currentFrom.text,"onUpdate:modelValue":l[4]||(l[4]=l=>e.currentFrom.text=l),rows:"7"},null,8,["modelValue"])])),_:1}),g(u,{label:"评分",prop:"rate"},{default:S((()=>[g("div",O,[g(p,{modelValue:e.currentFrom.rate,"onUpdate:modelValue":l[5]||(l[5]=l=>e.currentFrom.rate=l),colors:[e.themeColor,e.themeColor,e.themeColor]},null,8,["modelValue","colors"])])])),_:1}),g(u,{label:"推荐",prop:"recommend"},{default:S((()=>[g(c,{modelValue:e.currentFrom.recommend,"onUpdate:modelValue":l[6]||(l[6]=l=>e.currentFrom.recommend=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),g("div",D,[g(u,{label:"原价",prop:"oldPrice"},{default:S((()=>[g(n,{modelValue:e.currentFrom.oldPrice,"onUpdate:modelValue":l[7]||(l[7]=l=>e.currentFrom.oldPrice=l)},null,8,["modelValue"])])),_:1}),g(u,{label:"现价",prop:"price"},{default:S((()=>[g(n,{modelValue:e.currentFrom.price,"onUpdate:modelValue":l[8]||(l[8]=l=>e.currentFrom.price=l)},null,8,["modelValue"])])),_:1})]),g(u,null,{default:S((()=>[g(F,{type:"primary",onClick:l[9]||(l[9]=l=>e.onSubmit("menuFrom"))},{default:S((()=>[U])),_:1}),e.currentFrom.id?y("",!0):(f(),h(F,{key:0,onClick:l[10]||(l[10]=l=>e.resetForm())},{default:S((()=>[k])),_:1}))])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","model-value","onClose"])}));_.render=T,_.__scopeId="data-v-5e88e1b2";var L=s({name:"modulesTable",components:{update:_},setup(){let e=i("$message"),l=x({value:[]}),a=C({value:[]}),t=C([{value:0,label:"玄幻"},{value:1,label:"都市"},{value:2,label:"真实"}]),r=d(0),u=x(V),s=x({pageNum:1,pageSize:10,types:"",name:""}),p=d(!1),c=x({value:{}});function m(e,t){var o;a.value=t||[],Object.assign(s,e||{}),(o=s,n({url:"modules/table",params:o})).then((e=>{l.value=e.data.list,r.value=e.data.total}))}function f(a){l.value=l.value.filter((e=>-1==a.indexOf(e.id))),e.success("删除成功")}return m(),{list:l,total:r,config:u,operateData:{value:0,operates:[{label:"推荐",value:0},{label:"取消推荐",value:1},{label:"删除",value:2}]},listQuery:s,isDialog:p,currentFrom:c,selectData:a,selectMenuList:t,handleResetSearch:function(){Object.keys(s).forEach(((e,l)=>{-1==["pageNum","pageSize"].indexOf(e)&&(s[e]="")}))},handleAddMenu:function(){p.value=!0},refresh:function(e){if(console.log(e,"refresh"),e.id){let a=l.value.map((e=>e.id)).indexOf(e.id);l.value[a]=e}else l.value.push(o(o({},e),{id:l.value[l.value.length-1].id+1,iconfont:"vitehome-liulanliang",href:"https://gitee.com/abc1612565136/vite-admin"})),console.log(l.value)},getList:m,handleSwitchChange:function(a,t){l.value[t]=a,e.success("修改成功")},handleBatchChange:function(a,t,r){switch(t.value){case 0:case 1:l.value.forEach(((e,l)=>{-1!==a.indexOf(e.id)&&(0===t.value?e.recommend=1:e.recommend=0)})),e.success("修改成功");break;case 2:f(a)}},handleUpdate:function(e,l){p.value=!0,c.value=x(JSON.parse(JSON.stringify(e))),console.log(e)},handleDelete:function(e,l){f([e.id])},handleSortCustom:function(e){console.log("远程搜索",e),s[e.prop]=e.order,m()}}}});const j=F();p("data-v-b0de1682");const B={class:"app-container"},M={class:"operate-container"},P=g("div",null,[g("i",{class:"el-icon-search"}),g("span",null,"筛选搜索")],-1),R=w(" 查询搜索 "),z=w(" 重置 "),Q={style:{"margin-top":"15px"}},N={class:"screenForm"},I={class:"operate-container"},q=g("div",null,[g("i",{class:"el-icon-tickets"}),g("span",null,"数据列表")],-1),A=w(" 添加 ");c();const E=j(((e,l,a,t,r,o)=>{const n=m("el-button"),u=m("el-input"),s=m("el-form-item"),i=m("el-option"),d=m("el-select"),p=m("el-form"),c=m("el-card"),y=m("powerful-table"),F=m("update");return f(),h("div",B,[g(c,{class:"filter-container",style:{marginBottom:"20px"},shadow:e.defalutData.cardShadow},{default:j((()=>[g("div",M,[P,g("div",null,[g(n,{style:{float:"right"},type:"primary",onClick:l[1]||(l[1]=l=>e.getList())},{default:j((()=>[R])),_:1}),g(n,{style:{float:"right","margin-right":"15px"},onClick:l[2]||(l[2]=l=>e.handleResetSearch())},{default:j((()=>[z])),_:1})])]),g("div",Q,[g(p,{inline:!0,model:e.listQuery},{default:j((()=>[g("div",N,[g(s,{label:"书名："},{default:j((()=>[g(u,{modelValue:e.listQuery.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.listQuery.name=l),placeholder:"请输入书名",style:{width:"80%"},clearable:""},null,8,["modelValue"])])),_:1}),g(s,{label:"书类型：",prop:"types"},{default:j((()=>[g(d,{modelValue:e.listQuery.types,"onUpdate:modelValue":l[4]||(l[4]=l=>e.listQuery.types=l),placeholder:"请选择"},{default:j((()=>[(f(!0),h(v,null,b(e.selectMenuList,(e=>(f(),h(i,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["model"])])])),_:1},8,["shadow"]),g(c,{shadow:e.defalutData.cardShadow},{default:j((()=>[g("div",I,[q,g("div",null,[g(n,{type:"primary",class:"btn-add",onClick:l[5]||(l[5]=l=>e.handleAddMenu()),size:"mini"},{default:j((()=>[A])),_:1})])]),g("div",null,[g(y,{ref:"Table",list:e.list.value,header:e.config,isSelect:!0,total:e.total,tableName:"Table",operateData:e.operateData,selectData:e.selectData.value,onBatchOperate:e.handleBatchChange,onSizeChange:e.getList,onSwitchChange:e.handleSwitchChange,onUpdate:e.handleUpdate,onRemove:e.handleDelete,onSortCustom:e.handleSortCustom},null,8,["list","header","total","operateData","selectData","onBatchOperate","onSizeChange","onSwitchChange","onUpdate","onRemove","onSortCustom"])])])),_:1},8,["shadow"]),g(F,{dialog:e.isDialog,"onUpdate:dialog":l[6]||(l[6]=l=>e.isDialog=l),currentFrom:e.currentFrom.value,"onUpdate:currentFrom":l[7]||(l[7]=l=>e.currentFrom.value=l),selectMenuList:e.selectMenuList,onRefresh:e.refresh},null,8,["dialog","currentFrom","selectMenuList","onRefresh"])])}));L.render=E,L.__scopeId="data-v-b0de1682";export default L;
