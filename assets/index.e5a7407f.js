import{u as e,c as t,a,b as l,d as o}from"./menu.de2a863a.js";import{q as r,v as n,r as i,o as d,c as s,a as u,F as m,j as c,m as p,A as h,k as g,e as f,S as v,d as b,f as F,z as y,x as _,y as V}from"./vendor.3c20cdd8.js";import{a as w,b as x}from"./index.4e0d8f0d.js";const k=[{label:"编号",minWidth:"80",sortable:!0,poprs:[{popr:"id"}]},{label:"菜单名称",overflowTooltip:!0,poprs:[{popr:"title"}]},{label:"菜单级数",poprs:[{popr:"level",filter:[{key:0,value:"一级"},{key:1,value:"二级"}]}]},{label:"前端名称",poprs:[{popr:"name"}]},{label:"前端图标",poprs:[{type:"iconfont",popr:"icon",data:{style:{fontSize:"24px"},class:["viteIcon"]}}]},{label:"是否显示",poprs:[{popr:"hidden",type:"switch",data:{activeValue:0,inactiveValue:1,activeColor:"store.getter.themeColo",inactiveText:"隐",activeText:"显"}}]},{label:"排序",sortable:!0,poprs:[{popr:"sort"}]},{label:"操作",minWidth:"180px",poprs:[{type:"btn",data:[{tip:"查看下级",type:"primary",icon:"el-icon-view",emit:"look"},{tip:"编辑",type:"info",icon:"el-icon-edit-outline",emit:"update"},{tip:"删除",type:"danger",icon:"el-icon-delete",emit:"remove"}]}]}];const S={name:"MenuDetail",props:{dialog:{type:Boolean,default:!1},currentFrom:{type:Object,default:()=>{}},selectMenuList:{type:Array,default:()=>[]}},data:()=>({rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入前端名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入前端图标",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}]}}),emits:["update:currentFrom","update:dialog","refresh"],methods:{close(){this.$emit("update:dialog",!1),this.$emit("update:currentFrom",{parentId:0,hidden:0,sort:0})},onSubmit(a){this.$refs[a].validate((l=>{if(!l)return this.$message({message:"验证失败",type:"error",duration:1e3}),!1;this.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.currentFrom.id?e(this.currentFrom.id,this.currentFrom).then((e=>{this.$message({message:"修改成功",type:"success",duration:1e3}),this.$emit("update:dialog",!1)})):t(this.currentFrom).then((e=>{this.$refs[a].resetFields(),this.resetForm(a),this.$message({message:"提交成功",type:"success",duration:1e3}),this.$emit("update:dialog",!1)})),setTimeout((()=>{this.$emit("refresh")}),300)}))}))},resetForm(e){this.$refs[e].resetFields(),this.$emit("update:currentFrom",{parentId:0,hidden:0,sort:0})}}},U=h("data-v-2fd740b5");r("data-v-2fd740b5");const $=g("是"),C=g("否"),L=g("提交"),I=g("重置");n();const D=U(((e,t,a,l,o,r)=>{const n=i("el-input"),h=i("el-form-item"),g=i("el-option"),f=i("el-select"),v=i("el-radio"),b=i("el-radio-group"),F=i("el-button"),y=i("el-form"),_=i("el-drawer");return d(),s(_,{title:a.currentFrom.id?"修改":"添加",modelValue:a.dialog,"onUpdate:modelValue":t[9]||(t[9]=e=>a.dialog=e),direction:"rtl",ref:"drawer",onClose:r.close},{default:U((()=>[u(y,{model:a.currentFrom,rules:o.rules,ref:"menuFrom","label-width":"100px",style:{padding:"0 20px"}},{default:U((()=>[u(h,{label:"菜单名称：",prop:"title"},{default:U((()=>[u(n,{modelValue:a.currentFrom.title,"onUpdate:modelValue":t[1]||(t[1]=e=>a.currentFrom.title=e)},null,8,["modelValue"])])),_:1}),u(h,{label:"上级菜单："},{default:U((()=>[u(f,{modelValue:a.currentFrom.parentId,"onUpdate:modelValue":t[2]||(t[2]=e=>a.currentFrom.parentId=e),style:{width:"100%"},placeholder:"请选择菜单"},{default:U((()=>[(d(!0),s(m,null,c(a.selectMenuList,(e=>(d(),s(g,{key:e.id,label:e.title,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(h,{label:"前端名称：",prop:"name"},{default:U((()=>[u(n,{modelValue:a.currentFrom.name,"onUpdate:modelValue":t[3]||(t[3]=e=>a.currentFrom.name=e)},null,8,["modelValue"])])),_:1}),u(h,{label:"前端图标：",prop:"icon"},{default:U((()=>[u(n,{modelValue:a.currentFrom.icon,"onUpdate:modelValue":t[4]||(t[4]=e=>a.currentFrom.icon=e),style:{width:"80%"}},null,8,["modelValue"]),u("i",{class:[a.currentFrom.icon,e.defalutData.iconfont],style:{"margin-left":"10px","font-size":"24px"}},null,2)])),_:1}),u(h,{label:"是否显示："},{default:U((()=>[a.dialog?(d(),s(b,{key:0,modelValue:a.currentFrom.hidden,"onUpdate:modelValue":t[5]||(t[5]=e=>a.currentFrom.hidden=e)},{default:U((()=>[u(v,{label:0},{default:U((()=>[$])),_:1}),u(v,{label:1},{default:U((()=>[C])),_:1})])),_:1},8,["modelValue"])):p("",!0)])),_:1}),u(h,{label:"排序："},{default:U((()=>[u(n,{modelValue:a.currentFrom.sort,"onUpdate:modelValue":t[6]||(t[6]=e=>a.currentFrom.sort=e)},null,8,["modelValue"])])),_:1}),u(h,null,{default:U((()=>[u(F,{type:"primary",onClick:t[7]||(t[7]=e=>r.onSubmit("menuFrom"))},{default:U((()=>[L])),_:1}),a.currentFrom.id?p("",!0):(d(),s(F,{key:0,onClick:t[8]||(t[8]=e=>r.resetForm("menuFrom"))},{default:U((()=>[I])),_:1}))])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue","onClose"])}));S.render=D,S.__scopeId="data-v-2fd740b5";const z=[{id:0,title:"无上级菜单"}],T=f({name:"menu",components:{update:S},setup(){const e=v().ctx;w(),x();let t=b({value:[]}),r=b({value:[]});console.log(r.value);let n=F(0),i=b(k),d=b({pageNum:1,pageSize:10}),s=F(0),u=b({value:[]}),m=F(!1),c=b({value:{}});function p(e){0==s.value&&(u.value=[z],r.value=z,console.log(123,u)),Object.assign(d,e||d),a(s.value,d).then((e=>{t.value=b(e.data.list),n.value=e.data.total}))}return p(),{list:t,total:n,config:i,listQuery:d,parentId:s,upParent:u,isDialog:m,currentFrom:c,allList:r,handleAddMenu:function(){m.value=!0,c.value={parentId:s.value,hidden:0,sort:0},console.log("添加",c)},getList:p,backUp:function(){d.pageNum=1,s.value=u.value[u.value.length-1][0].parentId,r.value=u.value[u.value.length-1],u.value.splice(u.value.length-1,1),p()},handleHiddenChange:function(t,a){l(t.id,{hidden:t.hidden}).then((t=>{e.$message({message:"修改成功",type:"success",duration:1e3})}))},handleShowNextLevel:function(e,t){console.log(u.value),u.value.push([e]),r.value=u.value[u.value.length-1],s.value=e.id,p()},handleUpdate:function(e,t){m.value=!0,c.value=b(JSON.parse(JSON.stringify(e)))},handleDelete:function(t,a){o(t.id).then((t=>{e.$message({message:"删除成功",type:"success",duration:1e3}),p()}))}}}}),M=h("data-v-10c86608");r("data-v-10c86608");const N={class:"app-container"},j={class:"operate-container"},O=u("div",null,[u("i",{class:"el-icon-tickets"}),u("span",null,"数据列表")],-1),q=u("i",{class:"el-icon-back"},null,-1),A=g("返回上级 "),B=g(" 添加 ");n();const R=M(((e,t,a,l,o,r)=>{const n=i("el-button"),m=i("el-card"),c=i("powerful-table"),p=i("update");return d(),s("div",N,[u(m,{style:{marginBottom:"20px"},shadow:e.defalutData.cardShadow},{default:M((()=>[u("div",j,[O,u("div",null,[u(y,{name:"fadeOpticy"},{default:M((()=>[_(u(n,{type:"primary",class:"btn-add",onClick:t[1]||(t[1]=t=>e.backUp()),size:"mini"},{default:M((()=>[q,A])),_:1},512),[[V,e.upParent.value.length>1]])])),_:1}),u(n,{type:"primary",class:"btn-add",onClick:t[2]||(t[2]=t=>e.handleAddMenu()),size:"mini"},{default:M((()=>[B])),_:1})])])])),_:1},8,["shadow"]),u(m,{shadow:e.defalutData.cardShadow},{default:M((()=>[u("div",null,[u(c,{ref:"menuTable",list:e.list.value,header:e.config,isSelect:!1,total:e.total,tableName:"menuTable",onSizeChange:e.getList,onSwitchChange:e.handleHiddenChange,onLook:e.handleShowNextLevel,onUpdate:e.handleUpdate,onRemove:e.handleDelete},null,8,["list","header","total","onSizeChange","onSwitchChange","onLook","onUpdate","onRemove"])])])),_:1},8,["shadow"]),u(p,{dialog:e.isDialog,"onUpdate:dialog":t[3]||(t[3]=t=>e.isDialog=t),currentFrom:e.currentFrom.value,"onUpdate:currentFrom":t[4]||(t[4]=t=>e.currentFrom.value=t),selectMenuList:e.allList.value,onRefresh:e.getList},null,8,["dialog","currentFrom","selectMenuList","onRefresh"])])}));T.render=R,T.__scopeId="data-v-10c86608";export default T;
