var e=Object.assign;import{s as l,c as a}from"./index.4e0d8f0d.js";import{e as t,i as o,f as r,q as n,v as u,r as s,o as i,c as d,a as c,F as p,j as m,m as f,A as h,k as g,d as v,as as b}from"./vendor.3c20cdd8.js";const y=[{label:"编号",minWidth:"60",sortable:!0,poprs:[{popr:"id"}]},{label:"书名",poprs:[{type:"href",popr:"href",data:{popr:"name",style:{fontWeight:"bold"}}},{text:"热度：",type:"iconfont",popr:"iconfont",data:{class:["viteIcon"],style:{color:"red"}}}]},{label:"封面",width:"120",poprs:[{type:"image",popr:"image",data:{preview:!0,style:{width:"40px",height:"60px",borderRadius:"5px"}}}]},{label:"类型",width:"100",poprs:[{popr:"types",filter:[{key:0,value:"玄幻"},{key:1,value:"都市"},{key:2,value:"真实"}]}]},{label:"内容",overflowTooltip:!0,poprs:[{popr:"text"}]},{label:"评分",width:"150",poprs:[{popr:"rate",type:"rate",data:{colors:[a.getters.getThemeColor,a.getters.getThemeColor,a.getters.getThemeColor],max:5,allowHalf:!0}}]},{label:"推荐",width:"100",poprs:[{popr:"recommend",type:"switch",data:{activeColor:a.getters.getThemeColor}}]},{label:"价格",width:"120",poprs:[{text:"原价：",popr:"oldPrice"},{popr:"price",type:"input",data:{placeholder:"请输入现价"}}]},{label:"更新时间（远程搜索）",sortable:"custom",poprs:[{popr:"date"}]},{label:"操作",minWidth:"120px",poprs:[{type:"btn",data:[{tip:"编辑",type:"info",icon:"el-icon-edit-outline",emit:"update"},{tip:"删除",type:"danger",icon:"el-icon-delete",emit:"remove"}]}]}];var F=t({props:{dialog:{type:Boolean,default:!1},currentFrom:{type:Object,default:()=>{}},selectMenuList:{type:Array,default:()=>[]}},emits:["update:currentFrom","update:dialog","refresh"],setup(e,l){let a=o("messageBox"),t=o("$message"),n=r({});return{close:function(){l.emit("update:dialog",!1),l.emit("update:currentFrom",{})},uploadForm:n,resetForm:function(){n.resetFields(),l.emit("update:currentFrom",{})},onSubmit:function(){n.value.validate((o=>{if(!o)return t({message:"验证失败",type:"error",duration:1e3}),!1;a.confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{e.currentFrom.id?t({message:"修改成功",type:"success",duration:1e3}):setTimeout((()=>{t({message:"提交成功",type:"success",duration:1e3})}),200),setTimeout((()=>{l.emit("refresh",e.currentFrom),l.emit("update:dialog",!1)}),200)}))}))},rules:{title:[{required:!0,message:"请输入菜单名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],name:[{required:!0,message:"请输入前端名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],icon:[{required:!0,message:"请输入前端图标",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}]}}}});const w=h("data-v-5e88e1b2");n("data-v-5e88e1b2");const x={class:"a"},C={class:"grid grid-c-2"},V=g("提交"),_=g("重置");u();const S=w(((e,l,a,t,o,r)=>{const n=s("el-input"),u=s("el-form-item"),h=s("upload-file"),g=s("el-option"),v=s("el-select"),b=s("el-rate"),y=s("el-switch"),F=s("el-button"),S=s("el-form"),D=s("el-drawer");return i(),d(D,{title:e.currentFrom.id?"修改":"添加","model-value":e.dialog,direction:"rtl",ref:"drawer",onClose:e.close},{default:w((()=>[c(S,{model:e.currentFrom,rules:e.rules,ref:"uploadForm","label-position":"top",style:{padding:"0 20px"},class:"Dform"},{default:w((()=>[c(u,{label:"书名",prop:"name"},{default:w((()=>[c(n,{modelValue:e.currentFrom.name,"onUpdate:modelValue":l[1]||(l[1]=l=>e.currentFrom.name=l)},null,8,["modelValue"])])),_:1}),c(u,{label:"封面",prop:"image"},{default:w((()=>[c(h,{value:e.currentFrom.image,"onUpdate:value":l[2]||(l[2]=l=>e.currentFrom.image=l),disabled:"",tipLabel:"当前仅为示例，请改成可上传地址"},null,8,["value"])])),_:1}),c(u,{label:"类型",prop:"types"},{default:w((()=>[c(v,{modelValue:e.currentFrom.types,"onUpdate:modelValue":l[3]||(l[3]=l=>e.currentFrom.types=l),placeholder:"请选择",style:{width:"100%"}},{default:w((()=>[(i(!0),d(p,null,m(e.selectMenuList,(e=>(i(),d(g,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),c(u,{label:"内容",prop:"text"},{default:w((()=>[c(n,{type:"textarea",modelValue:e.currentFrom.text,"onUpdate:modelValue":l[4]||(l[4]=l=>e.currentFrom.text=l),rows:"7"},null,8,["modelValue"])])),_:1}),c(u,{label:"评分",prop:"rate"},{default:w((()=>[c("div",x,[c(b,{modelValue:e.currentFrom.rate,"onUpdate:modelValue":l[5]||(l[5]=l=>e.currentFrom.rate=l),colors:[e.themeColor,e.themeColor,e.themeColor]},null,8,["modelValue","colors"])])])),_:1}),c(u,{label:"推荐",prop:"recommend"},{default:w((()=>[c(y,{modelValue:e.currentFrom.recommend,"onUpdate:modelValue":l[6]||(l[6]=l=>e.currentFrom.recommend=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])])),_:1}),c("div",C,[c(u,{label:"原价",prop:"oldPrice"},{default:w((()=>[c(n,{modelValue:e.currentFrom.oldPrice,"onUpdate:modelValue":l[7]||(l[7]=l=>e.currentFrom.oldPrice=l)},null,8,["modelValue"])])),_:1}),c(u,{label:"现价",prop:"price"},{default:w((()=>[c(n,{modelValue:e.currentFrom.price,"onUpdate:modelValue":l[8]||(l[8]=l=>e.currentFrom.price=l)},null,8,["modelValue"])])),_:1})]),c(u,null,{default:w((()=>[c(F,{type:"primary",onClick:l[9]||(l[9]=l=>e.onSubmit("menuFrom"))},{default:w((()=>[V])),_:1}),e.currentFrom.id?f("",!0):(i(),d(F,{key:0,onClick:l[10]||(l[10]=l=>e.resetForm())},{default:w((()=>[_])),_:1}))])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","model-value","onClose"])}));F.render=S,F.__scopeId="data-v-5e88e1b2";var D=t({name:"modulesTable",components:{update:F},setup(){let a=o("$message"),t=v({value:[]}),n=b({value:[]}),u=b([{value:0,label:"玄幻"},{value:1,label:"都市"},{value:2,label:"真实"}]),s=r(0),i=v(y),d=v({pageNum:1,pageSize:10,types:"",name:""}),c=r(!1),p=v({value:{}});function m(e,a){var o;n.value=a||[],Object.assign(d,e||{}),(o=d,l({url:"modules/table",params:o})).then((e=>{t.value=e.data.list,s.value=e.data.total}))}function f(e){t.value=t.value.filter((l=>-1==e.indexOf(l.id))),a.success("删除成功")}return m(),{list:t,total:s,config:i,operateData:{value:0,operates:[{label:"推荐",value:0},{label:"取消推荐",value:1},{label:"删除",value:2}]},listQuery:d,isDialog:c,currentFrom:p,selectData:n,selectMenuList:u,handleResetSearch:function(){Object.keys(d).forEach(((e,l)=>{-1==["pageNum","pageSize"].indexOf(e)&&(d[e]="")}))},handleAddMenu:function(){c.value=!0},refresh:function(l){if(console.log(l,"refresh"),l.id){let e=t.value.map((e=>e.id)).indexOf(l.id);t.value[e]=l}else t.value.push(e(e({},l),{id:t.value[t.value.length-1].id+1,iconfont:"vitehome-liulanliang",href:"https://gitee.com/abc1612565136/vite-admin"})),console.log(t.value)},getList:m,handleSwitchChange:function(e,l){t.value[l]=e,a.success("修改成功")},handleBatchChange:function(e,l,o){switch(l.value){case 0:case 1:t.value.forEach(((a,t)=>{-1!==e.indexOf(a.id)&&(0===l.value?a.recommend=1:a.recommend=0)})),a.success("修改成功");break;case 2:f(e)}},handleUpdate:function(e,l){c.value=!0,p.value=v(JSON.parse(JSON.stringify(e))),console.log(e)},handleDelete:function(e,l){f([e.id])},handleSortCustom:function(e){console.log("远程搜索",e),d[e.prop]=e.order,m()}}}});const U=h("data-v-779a5fa8");n("data-v-779a5fa8");const k={class:"app-container"},O={class:"operate-container"},T=c("div",null,[c("i",{class:"el-icon-search"}),c("span",null,"筛选搜索")],-1),L=g(" 查询搜索 "),B=g(" 重置 "),M={style:{"margin-top":"15px"}},z={class:"screenForm"},j={class:"operate-container"},R=c("div",null,[c("i",{class:"el-icon-tickets"}),c("span",null,"数据列表")],-1),Q=g(" 添加 ");u();const N=U(((e,l,a,t,o,r)=>{const n=s("el-button"),u=s("el-input"),f=s("el-form-item"),h=s("el-option"),g=s("el-select"),v=s("el-form"),b=s("el-card"),y=s("powerful-table"),F=s("update");return i(),d("div",k,[c(b,{class:"filter-container",style:{marginBottom:"20px"},shadow:e.defalutData.cardShadow},{default:U((()=>[c("div",O,[T,c("div",null,[c(n,{style:{float:"right"},type:"primary",onClick:l[1]||(l[1]=l=>e.getList()),size:"small"},{default:U((()=>[L])),_:1}),c(n,{style:{float:"right","margin-right":"15px"},onClick:l[2]||(l[2]=l=>e.handleResetSearch()),size:"small"},{default:U((()=>[B])),_:1})])]),c("div",M,[c(v,{inline:!0,model:e.listQuery,size:"small"},{default:U((()=>[c("div",z,[c(f,{label:"书名："},{default:U((()=>[c(u,{modelValue:e.listQuery.name,"onUpdate:modelValue":l[3]||(l[3]=l=>e.listQuery.name=l),placeholder:"请输入书名",style:{width:"80%"},clearable:""},null,8,["modelValue"])])),_:1}),c(f,{label:"书类型：",prop:"types"},{default:U((()=>[c(g,{modelValue:e.listQuery.types,"onUpdate:modelValue":l[4]||(l[4]=l=>e.listQuery.types=l),placeholder:"请选择"},{default:U((()=>[(i(!0),d(p,null,m(e.selectMenuList,(e=>(i(),d(h,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["model"])])])),_:1},8,["shadow"]),c(b,{shadow:e.defalutData.cardShadow},{default:U((()=>[c("div",j,[R,c("div",null,[c(n,{type:"primary",class:"btn-add",onClick:l[5]||(l[5]=l=>e.handleAddMenu()),size:"mini"},{default:U((()=>[Q])),_:1})])]),c("div",null,[c(y,{ref:"Table",list:e.list.value,header:e.config,isSelect:!0,total:e.total,tableName:"Table",operateData:e.operateData,selectData:e.selectData.value,onBatchOperate:e.handleBatchChange,onSizeChange:e.getList,onSwitchChange:e.handleSwitchChange,onUpdate:e.handleUpdate,onRemove:e.handleDelete,onSortCustom:e.handleSortCustom},null,8,["list","header","total","operateData","selectData","onBatchOperate","onSizeChange","onSwitchChange","onUpdate","onRemove","onSortCustom"])])])),_:1},8,["shadow"]),c(F,{dialog:e.isDialog,"onUpdate:dialog":l[6]||(l[6]=l=>e.isDialog=l),currentFrom:e.currentFrom.value,"onUpdate:currentFrom":l[7]||(l[7]=l=>e.currentFrom.value=l),selectMenuList:e.selectMenuList,onRefresh:e.refresh},null,8,["dialog","currentFrom","selectMenuList","onRefresh"])])}));D.render=N,D.__scopeId="data-v-779a5fa8";export default D;
